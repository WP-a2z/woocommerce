(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[4037],{4597:(e,t,s)=>{"use strict";s.d(t,{l:()=>V});var r=s(1609),n=s(4656),o=s(6087),l=s(7723),a=s(8537),i=s(851),d=s(332),c=s(3993),u=s(7143),p=s(7594),m=s(7104),g=s(9813),h=s(224);s(1707);const E=({id:e,className:t,label:s,onChange:a,options:E,value:f,required:v=!1,errorId:b,autoComplete:y="off",errorMessage:_=(0,l.__)("Please select a valid option","woocommerce")})=>{const A=(0,o.useRef)(null),C=(0,o.useId)(),k=e||"control-"+C,S=b||k,{setValidationErrors:w,clearValidationError:T}=(0,u.useDispatch)(p.VALIDATION_STORE_KEY),{error:I,validationErrorId:N}=(0,u.useSelect)((e=>{const t=e(p.VALIDATION_STORE_KEY);return{error:t.getValidationError(S),validationErrorId:t.getValidationErrorId(S)}})),[F,O]=(0,o.useState)(!1);return(0,o.useEffect)((()=>(!v||f?T(S):w({[S]:{message:_,hidden:!0}}),()=>{T(S)})),[T,f,S,_,v,w]),(0,r.createElement)("div",{id:k,className:(0,i.A)("wc-block-components-combobox",t,{"is-active":f,"has-error":(null==I?void 0:I.message)&&!(null!=I&&I.hidden)}),ref:A,onFocus:()=>O(!0),onBlur:()=>O(!1)},(0,r.createElement)(d.A,{className:"wc-block-components-combobox-control",label:s,onChange:e=>{a(e),O(!1)},onSelect:()=>O(!1),onFilterValueChange:e=>{if(e.length){const t=(0,c.isObject)(A.current)?A.current.ownerDocument.activeElement:void 0;if(t&&(0,c.isObject)(A.current)&&A.current.contains(t))return;const s=e.toLocaleUpperCase(),r=E.find((e=>e.value.toLocaleUpperCase()===s));if(r)return void a(r.value);const n=E.find((e=>e.label.toLocaleUpperCase().startsWith(s)));n&&a(n.value)}},options:E,value:f||"",allowReset:!1,autoComplete:y,"aria-invalid":(null==I?void 0:I.message)&&!(null!=I&&I.hidden),"aria-errormessage":N}),(0,r.createElement)(m.A,{icon:F?g.A:h.A}),(0,r.createElement)(n.ValidationInputError,{propertyName:S}))};s(2931);const f=({className:e,countries:t,id:s,label:n,onChange:d,value:c="",autoComplete:u="off",required:p=!1,errorId:m,errorMessage:g=(0,l.__)("Please select a country","woocommerce")})=>{const h=(0,o.useMemo)((()=>Object.entries(t).map((([e,t])=>({value:e,label:(0,a.decodeEntities)(t)})))),[t]);return(0,r.createElement)("div",{className:(0,i.A)(e,"wc-block-components-country-input")},(0,r.createElement)(E,{id:s,label:n,onChange:d,options:h,value:c,errorId:m,errorMessage:g,required:p,autoComplete:u}))};var v=s(812);const b=e=>(0,r.createElement)(f,{countries:v.AG,...e}),y=e=>(0,r.createElement)(f,{countries:v.G3,...e});s(8824);const _=(e,t)=>{const s=t.find((t=>t.label.toLocaleUpperCase()===e.toLocaleUpperCase()||t.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return s?s.value:""},A=({className:e,id:t,states:s,country:d,label:c,onChange:u,autoComplete:p="off",value:m="",required:g=!1,errorId:h=""})=>{const f=s[d],v=(0,o.useMemo)((()=>f?Object.keys(f).map((e=>({value:e,label:(0,a.decodeEntities)(f[e])}))):[]),[f]),b=(0,o.useCallback)((e=>{const t=v.length>0?_(e,v):e;t!==m&&u(t)}),[u,v,m]),y=(0,o.useRef)(m);return(0,o.useEffect)((()=>{y.current!==m&&(y.current=m)}),[m]),(0,o.useEffect)((()=>{if(v.length>0&&y.current){const e=_(y.current,v);e!==y.current&&b(e)}}),[v,b]),v.length>0?(0,r.createElement)(E,{className:(0,i.A)(e,"wc-block-components-state-input"),id:t,label:c,onChange:b,options:v,value:m,errorMessage:(0,l.__)("Please select a state.","woocommerce"),errorId:h,required:g,autoComplete:p}):(0,r.createElement)(n.ValidatedTextInput,{className:e,id:t,label:c,onChange:b,autoComplete:p,value:m,required:g})},C=e=>(0,r.createElement)(A,{states:v.uz,...e}),k=e=>(0,r.createElement)(A,{states:v.SL,...e});var S=s(9491),w=s(1573),T=s(923),I=s.n(T),N=s(8585);var F=s(1e3),O=s(3832);const B=({field:e,props:t,onChange:s,value:a})=>{var i;const d=null!==(i=null==e?void 0:e.required)&&void 0!==i&&i,[c,u]=(0,o.useState)((()=>Boolean(a)||d));return(0,r.createElement)(o.Fragment,null,c?(0,r.createElement)(n.ValidatedTextInput,{...t,type:e.type,label:d?e.label:e.optionalLabel,className:`wc-block-components-address-form__${e.key}`,value:a,onChange:t=>s(e.key,t)}):(0,r.createElement)("button",{className:"wc-block-components-address-form__address_2-toggle",onClick:()=>u(!0)},(0,l.sprintf)(
// translators: %s: address 2 field label.
// translators: %s: address 2 field label.
(0,l.__)("+ Add %s","woocommerce"),e.label.toLowerCase())))},P=(e,t,s)=>({id:`${t}-${null==e?void 0:e.key}`.replaceAll("/","-"),errorId:`${s}_${null==e?void 0:e.key}`,label:null!=e&&e.required?null==e?void 0:e.label:null==e?void 0:e.optionalLabel,autoCapitalize:null==e?void 0:e.autocapitalize,autoComplete:null==e?void 0:e.autocomplete,errorMessage:null==e?void 0:e.errorMessage,required:null==e?void 0:e.required,className:`wc-block-components-address-form__${null==e?void 0:e.key}`.replaceAll("/","-"),...null==e?void 0:e.attributes}),R=(e,t,s)=>({field:t.find((t=>t.key===e)),value:(0,c.objectHasProp)(s,e)?s[e]:void 0}),D=({formId:e,address1:t,address2:s,addressType:o,onChange:l})=>{var a,i,d,c;const u=t?P(t.field,e,o):void 0,p=s?P(s.field,e,o):void 0;return(0,r.createElement)(r.Fragment,null,t&&(0,r.createElement)(n.ValidatedTextInput,{...u,type:null===(a=t.field)||void 0===a?void 0:a.type,label:null===(i=t.field)||void 0===i?void 0:i.label,className:`wc-block-components-address-form__${null===(d=t.field)||void 0===d?void 0:d.key}`,value:t.value,onChange:e=>{var s;return l(null===(s=t.field)||void 0===s?void 0:s.key,e)}}),(null==s?void 0:s.field)&&!(null!=s&&null!==(c=s.field)&&void 0!==c&&c.hidden)&&(0,r.createElement)(B,{field:s.field,props:p,onChange:l,value:null==s?void 0:s.value}))},L=({id:e="",fields:t,fieldConfig:s={},onChange:a,addressType:d="shipping",values:m,children:g})=>{const h=(0,S.useInstanceId)(L),f=(0,w.c)(t),v=(0,w.c)(s),_=(0,w.c)((0,c.objectHasProp)(m,"country")?m.country:""),A=(0,o.useMemo)((()=>{const e=(0,N.A)(f,v,_);return{fields:e,addressType:d,required:e.filter((e=>e.required)),hidden:e.filter((e=>e.hidden))}}),[f,v,_,d]),T=(0,o.useRef)({});return(0,o.useEffect)((()=>{const e={...m,...Object.fromEntries(A.hidden.map((e=>[e.key,""])))};I()(m,e)||a(e)}),[a,A,m]),(0,o.useEffect)((()=>{"shipping"===d&&(0,c.objectHasProp)(m,"country")&&(e=>{const t="shipping_country",s=(0,u.select)(p.VALIDATION_STORE_KEY).getValidationError(t);!e.country&&(e.city||e.state||e.postcode)&&(s?(0,u.dispatch)(p.VALIDATION_STORE_KEY).showValidationError(t):(0,u.dispatch)(p.VALIDATION_STORE_KEY).setValidationErrors({[t]:{message:(0,l.__)("Please select your country","woocommerce"),hidden:!1}})),s&&e.country&&(0,u.dispatch)(p.VALIDATION_STORE_KEY).clearValidationError(t)})(m)}),[m,d]),(0,o.useEffect)((()=>{var e,t;null===(e=T.current)||void 0===e||null===(t=e.postcode)||void 0===t||t.revalidate()}),[_]),e=e||`${h}`,(0,r.createElement)("div",{id:e,className:"wc-block-components-address-form"},A.fields.map((t=>{if(t.hidden)return null;const s=P(t,e,d);if("email"===t.key&&(s.id="email",s.errorId="billing_email"),"checkbox"===t.type)return(0,r.createElement)(n.CheckboxControl,{key:t.key,checked:Boolean(m[t.key]),onChange:e=>{a({...m,[t.key]:e})},...s});if("address_1"===t.key){const s=R("address_1",A.fields,m),n=R("address_2",A.fields,m);return(0,r.createElement)(D,{address1:s,address2:n,addressType:d,formId:e,key:t.key,onChange:(e,t)=>{a({...m,[e]:t})}})}if("address_2"===t.key)return null;if("country"===t.key&&(0,c.objectHasProp)(m,"country")){const e="shipping"===d?y:b;return(0,r.createElement)(e,{key:t.key,...s,value:m.country,onChange:e=>{a({...m,country:e,state:"",postcode:""})}})}if("state"===t.key&&(0,c.objectHasProp)(m,"state")){const e="shipping"===d?k:C;return(0,r.createElement)(e,{key:t.key,...s,country:m.country,value:m.state,onChange:e=>a({...m,state:e})})}return"select"===t.type?void 0===t.options?null:(0,r.createElement)(E,{key:t.key,...s,className:(0,i.A)("wc-block-components-select-input",`wc-block-components-select-input-${t.key}`.replaceAll("/","-")),value:m[t.key],onChange:e=>{a({...m,[t.key]:e})},options:t.options}):(0,r.createElement)(n.ValidatedTextInput,{key:t.key,ref:e=>T.current[t.key]=e,...s,type:t.type,value:m[t.key],onChange:e=>a({...m,[t.key]:e}),customFormatter:e=>"postcode"===t.key?e.trimStart().toUpperCase():e,customValidation:e=>((e,t,s)=>!((e.required||e.value)&&("postcode"===t&&s&&!(0,F.isPostcode)({postcode:e.value,country:s})?(e.setCustomValidity((0,l.__)("Please enter a valid postcode","woocommerce")),1):"email"===t&&!(0,O.isEmail)(e.value)&&(e.setCustomValidity((0,l.__)("Please enter a valid email address","woocommerce")),1))))(e,t.key,(0,c.objectHasProp)(m,"country")?m.country:"")})})),g)},V=L},3494:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(1609),n=s(6087),o=s(8107),l=s(4717);const a=["BUTTON","FIELDSET","INPUT","OPTGROUP","OPTION","SELECT","TEXTAREA","A"],i=({children:e,style:t={},...s})=>{const i=(0,n.useRef)(null),d=()=>{i.current&&o.focus.focusable.find(i.current).forEach((e=>{a.includes(e.nodeName)&&e.setAttribute("tabindex","-1"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","false")}))},c=(0,l.YQ)(d,0,{leading:!0});return(0,n.useLayoutEffect)((()=>{let e;return d(),i.current&&(e=new window.MutationObserver(c),e.observe(i.current,{childList:!0,attributes:!0,subtree:!0})),()=>{e&&e.disconnect(),c.cancel()}}),[c]),(0,r.createElement)("div",{ref:i,"aria-disabled":"true",style:{userSelect:"none",pointerEvents:"none",cursor:"normal",...t},...s},e)}},5251:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var r=s(5703),n=s(6087),o=s(7143),l=s(7594),a=s(4107),i=s(4958);const d=()=>{const{needsShipping:e}=(0,i.m)(),{useShippingAsBilling:t,prefersCollection:s}=(0,o.useSelect)((e=>({useShippingAsBilling:e(l.CHECKOUT_STORE_KEY).getUseShippingAsBilling(),prefersCollection:e(l.CHECKOUT_STORE_KEY).prefersCollection()}))),{__internalSetUseShippingAsBilling:d}=(0,o.useDispatch)(l.CHECKOUT_STORE_KEY),{billingAddress:c,setBillingAddress:u,shippingAddress:p,setShippingAddress:m}=(0,a.q)(),g=(0,n.useCallback)((e=>{u({email:e})}),[u]),h=(0,r.getSetting)("forcedBillingAddress",!1);return{shippingAddress:p,billingAddress:c,setShippingAddress:m,setBillingAddress:u,setEmail:g,defaultFields:r.defaultFields,useShippingAsBilling:t,setUseShippingAsBilling:d,needsShipping:e,showShippingFields:!h&&e&&!s,showShippingMethods:e&&!s,showBillingFields:!e||!t||!!s,forcedBillingAddress:h,useBillingAsShipping:h||!!s}}},4107:(e,t,s)=>{"use strict";s.d(t,{q:()=>o});var r=s(7143),n=s(7594);const o=()=>{const{customerData:e,isInitialized:t}=(0,r.useSelect)((e=>{const t=e(n.CART_STORE_KEY);return{customerData:t.getCustomerData(),isInitialized:t.hasFinishedResolution("getCartData")}})),{setShippingAddress:s,setBillingAddress:o}=(0,r.useDispatch)(n.CART_STORE_KEY);return{isInitialized:t,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,setBillingAddress:o,setShippingAddress:s}}},1573:(e,t,s)=>{"use strict";s.d(t,{c:()=>l});var r=s(6087),n=s(923),o=s.n(n);function l(e){const t=(0,r.useRef)(e);return o()(e,t.current)||(t.current=e),t.current}},3127:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(1609),n=s(7723),o=s(3993),l=s(5703),a=s(6398);s(1094);const i=({address:e,onEdit:t,target:s,fieldConfig:i})=>{const d=(0,l.getSetting)("countryData",{});let c=(0,l.getSetting)("defaultAddressFormat","{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}\n{postcode}\n{country}");(0,o.objectHasProp)(d,null==e?void 0:e.country)&&(0,o.objectHasProp)(d[e.country],"format")&&(0,o.isString)(d[e.country].format)&&(c=d[e.country].format);const{name:u,address:p}=(0,a.M0)(e,c);return(0,r.createElement)("div",{className:"wc-block-components-address-card"},(0,r.createElement)("address",null,(0,r.createElement)("span",{className:"wc-block-components-address-card__address-section"},u),(0,r.createElement)("div",{className:"wc-block-components-address-card__address-section"},p.filter((e=>!!e)).map(((e,t)=>(0,r.createElement)("span",{key:"address-"+t},e)))),e.phone&&!i.phone.hidden?(0,r.createElement)("div",{key:"address-phone",className:"wc-block-components-address-card__address-section"},e.phone):""),t&&(0,r.createElement)("a",{role:"button",href:"#"+s,className:"wc-block-components-address-card__edit","aria-label":(0,n.__)("Edit address","woocommerce"),onClick:e=>{t(),e.preventDefault()}},(0,n.__)("Edit","woocommerce")))}},8202:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(1609),n=s(851);s(7259);const o=({isEditing:e=!1,addressCard:t,addressForm:s})=>{const o=(0,n.A)("wc-block-components-address-address-wrapper",{"is-editing":e});return(0,r.createElement)("div",{className:o},(0,r.createElement)("div",{className:"wc-block-components-address-card-wrapper"},t()),(0,r.createElement)("div",{className:"wc-block-components-address-form-wrapper"},s()))}},9017:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(7723);const n=({defaultTitle:e=(0,r.__)("Step","woocommerce"),defaultDescription:t=(0,r.__)("Step description text.","woocommerce"),defaultShowStepNumber:s=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:s}})},9463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var r=s(1609),n=s(851),o=s(1616),l=s(4656),a=s(5251),i=s(7143),d=s(7594),c=s(6087),u=s(4375),p=s(2663),m=s(2379),g=s(3494),h=s(923),E=s.n(h),f=s(4597),v=s(3603),b=s(812),y=s(8202),_=s(3127);const A=({addressFieldsConfig:e,defaultEditing:t=!1})=>{const{billingAddress:s,setShippingAddress:n,setBillingAddress:o,useBillingAsShipping:l}=(0,a.C)(),{dispatchCheckoutEvent:u}=(0,v.y)(),[p,m]=(0,c.useState)(t),{hasValidationErrors:g,invalidProps:h}=(0,i.useSelect)((e=>{const t=e(d.VALIDATION_STORE_KEY);return{hasValidationErrors:t.hasValidationErrors(),invalidProps:Object.keys(s).filter((e=>"email"!==e&&void 0!==t.getValidationError("billing_"+e))).filter(Boolean)}}));(0,c.useEffect)((()=>{h.length>0&&!1===p&&m(!0)}),[p,g,h.length]);const E=(0,c.useCallback)((e=>{o(e),l&&(n(e),u("set-shipping-address")),u("set-billing-address")}),[u,o,n,l]),A=(0,c.useCallback)((()=>(0,r.createElement)(_.A,{address:s,target:"billing",onEdit:()=>{m(!0)},fieldConfig:e})),[s,e]),C=(0,c.useCallback)((()=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(f.l,{id:"billing",addressType:"billing",onChange:E,values:s,fields:b.Hw,fieldConfig:e}))),[e,s,E]);return(0,r.createElement)(y.A,{isEditing:p,addressCard:A,addressForm:C})},C=({showCompanyField:e=!1,requireCompanyField:t=!1,showApartmentField:s=!1,requireApartmentField:n=!1,showPhoneField:o=!1,requirePhoneField:h=!1})=>{const{shippingAddress:f,billingAddress:v,setShippingAddress:b,useBillingAsShipping:y}=(0,a.C)(),{isEditor:_}=(0,p.m)();(0,u.Su)((()=>{if(y){const{email:t,...s}=v,r={...s};o||delete r.phone,e&&delete r.company,b(r)}}));const C=(0,c.useMemo)((()=>({company:{hidden:!e,required:t},address_2:{hidden:!s,required:n},phone:{hidden:!o,required:h}})),[e,t,s,n,o,h]),k=_?g.A:c.Fragment,S=y?[m.tG.BILLING_ADDRESS,m.tG.SHIPPING_ADDRESS]:[m.tG.BILLING_ADDRESS],{cartDataLoaded:w}=(0,i.useSelect)((e=>({cartDataLoaded:e(d.CART_STORE_KEY).hasFinishedResolution("getCartData")}))),T=!(!v.address_1||!v.first_name&&!v.last_name),{email:I,...N}=v,F=E()(N,f),O=_||!T||F;return(0,r.createElement)(c.Fragment,null,(0,r.createElement)(l.StoreNoticesContainer,{context:S}),(0,r.createElement)(k,null,w?(0,r.createElement)(A,{addressFieldsConfig:C,defaultEditing:O}):null))};var k=s(9017),S=s(7723);const w=(0,S.__)("Billing address","woocommerce"),T=(0,S.__)("Enter the billing address that matches your payment method.","woocommerce"),I=(0,S.__)("Billing and shipping address","woocommerce"),N=(0,S.__)("Enter the billing and shipping address that matches your payment method.","woocommerce"),F={...(0,k.A)({defaultTitle:w,defaultDescription:T}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};var O=s(9292);const B=(0,o.withFilteredAttributes)(F)((({title:e,description:t,children:s,className:o})=>{const{showFormStepNumbers:c}=(0,O.Oy)(),u=(0,i.useSelect)((e=>e(d.CHECKOUT_STORE_KEY).isProcessing())),{showCompanyField:p,requireCompanyField:m,showApartmentField:g,requireApartmentField:h,showPhoneField:E,requirePhoneField:f}=(0,O.Oy)(),{showBillingFields:v,forcedBillingAddress:b,useBillingAsShipping:y}=(0,a.C)();return v||y?(e=((e,t)=>t?e===w?I:e:e===I?w:e)(e,b),t=((e,t)=>t?e===T?N:e:e===N?T:e)(t,b),(0,r.createElement)(l.FormStep,{id:"billing-fields",disabled:u,className:(0,n.A)("wc-block-checkout__billing-fields",o),title:e,description:t,showStepNumber:c},(0,r.createElement)(C,{showCompanyField:p,requireCompanyField:m,showApartmentField:g,requireApartmentField:h,showPhoneField:E,requirePhoneField:f}),s)):null}))},1707:()=>{},2931:()=>{},8824:()=>{},1094:()=>{},7259:()=>{}}]);